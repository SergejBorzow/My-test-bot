import logging
import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram.filters import Command

# –¢–≤–æ–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
TOKEN = "7600848578:AAGmButWfDlPMCr5i0uhisHIKLVsKrDJRXw"

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
bot = Bot(token=TOKEN)
dp = Dispatcher()

# –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
menu = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="ü©∫ –¢–µ—Ä–∞–ø–µ–≤—Ç"), KeyboardButton(text="ü¶∑ –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è")],
        [KeyboardButton(text="üëÅ –û—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è"), KeyboardButton(text="‚ù§Ô∏è –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è")],
        [KeyboardButton(text="üìû –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"), KeyboardButton(text="üìç –ö–æ–Ω—Ç–∞–∫—Ç—ã")],
        [KeyboardButton(text="‚ö†Ô∏è –û—Å—Ç—Ä–∞—è –±–æ–ª—å")]
    ],
    resize_keyboard=True
)

# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
SCENARIOS = {
    "—Ç–µ—Ä–∞–ø–µ–≤—Ç": ["—Ç–µ—Ä–∞–ø–µ–≤—Ç", "–≤—Ä–∞—á", "–ø—Ä–æ—Å—Ç—É–¥–∞", "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞", "–±–æ–ª–∏—Ç –≥–æ—Ä–ª–æ"],
    "—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è": ["—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥", "–∑—É–±", "–±–æ–ª–∏—Ç –∑—É–±", "–∫–∞—Ä–∏–µ—Å", "–∑—É–±–Ω–æ–π"],
    "–æ—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è": ["–æ—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥", "–≥–ª–∞–∑", "–∑—Ä–µ–Ω–∏–µ", "–ø–ª–æ—Ö–æ –≤–∏–∂—É"],
    "–∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è": ["–∫–∞—Ä–¥–∏–æ–ª–æ–≥", "—Å–µ—Ä–¥—Ü–µ", "–¥–∞–≤–ª–µ–Ω–∏–µ", "—Ç–∞—Ö–∏–∫–∞—Ä–¥–∏—è"],
    "–æ—Å—Ç—Ä–∞—è –±–æ–ª—å": ["–æ—Å—Ç—Ä–∞—è –±–æ–ª—å", "–æ—á–µ–Ω—å –±–æ–ª—å–Ω–æ", "—Å—Ä–æ—á–Ω–æ", "—ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ"]
}

# –û—Ç–≤–µ—Ç—ã
RESPONSES = {
    "—Ç–µ—Ä–∞–ø–µ–≤—Ç": "ü©∫ –í—ã –∑–∞–ø–∏—Å–∞–Ω—ã –∫ —Ç–µ—Ä–∞–ø–µ–≤—Ç—É! –í—Ä–∞—á —Å–∫–æ—Ä–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è.",
    "—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è": "ü¶∑ –í–∞—Å –ø–µ—Ä–µ–≤–µ–ª–∏ –≤ –æ—Ç–¥–µ–ª —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–∏. –û–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.",
    "–æ—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—è": "üëÅ –í–∞—Å –ø–µ—Ä–µ–≤–µ–ª–∏ –≤ –æ—Ñ—Ç–∞–ª—å–º–æ–ª–æ–≥–∏—é. –í—Ä–∞—á —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.",
    "–∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è": "‚ù§Ô∏è –í–∞—Å –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–∏ –Ω–∞ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞. –û–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞.",
    "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä": "üìû –°–µ–π—á–∞—Å –≤–∞–º –ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä.",
    "–∫–æ–Ω—Ç–∞–∫—Ç—ã": "üìç –ù–∞—à –∞–¥—Ä–µ—Å: —É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. –ö–æ–ª–æ—Ç—É—à–∫–∏–Ω–∞. –¢–µ–ª–µ—Ñ–æ–Ω: +7 (900) 123-45-67",
    "–æ—Å—Ç—Ä–∞—è –±–æ–ª—å": "‚ö†Ô∏è –°—Ä–æ—á–Ω—ã–π –≤—ã–∑–æ–≤ –≤—Ä–∞—á–∞! –ú—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤–∞—à –∑–∞–ø—Ä–æ—Å!"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —Ç–µ–∫—Å—Ç—É
def find_category(text: str):
    text = text.lower()
    for category, keywords in SCENARIOS.items():
        if any(keyword in text for keyword in keywords):
            return category
    if "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" in text:
        return "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
    if "–∫–æ–Ω—Ç–∞–∫—Ç" in text or "–∞–¥—Ä–µ—Å" in text:
        return "–∫–æ–Ω—Ç–∞–∫—Ç—ã"
    return None

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞—Ä—Ç–∞
@dp.message(Command("start"))
async def cmd_start(message: types.Message):
    await message.answer("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–∂–µ–º –ø–æ–º–æ—á—å?", reply_markup=menu)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
@dp.message()
async def handle_message(message: types.Message):
    user_text = message.text
    category = find_category(user_text)
    if category:
        await message.answer(RESPONSES[category], reply_markup=menu)
    else:
        await message.answer("–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –ø–æ–Ω—è–ª –≤–∞—à –∑–∞–ø—Ä–æ—Å. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é –∏–∑ –º–µ–Ω—é.", reply_markup=menu)

# –ó–∞–ø—É—Å–∫
async def main():
    logger.info("Starting bot...")  # –í—Å—Ç–∞–≤–∏–ª–∏ —Å—é–¥–∞ –ª–æ–≥ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
